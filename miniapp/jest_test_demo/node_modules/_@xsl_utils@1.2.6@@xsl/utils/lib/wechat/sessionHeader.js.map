{"version":3,"sources":["../../src/wechat/sessionHeader.js"],"names":["platform","deviceId","ua","header","request","post","config","uasDomain","app","name","version","hotfixVersion","device","systemName","systemVersion","model","localizedModel","data"],"mappings":";;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AACA;;;;;;2FAEe;AAAA;;AAAA;AAAA;AAAA;AAAA;AACPA,kBADO,GACI,gBADJ;AAEPC,kBAFO,GAEI,kBAFJ;AAGPC,YAHO,mBAGYF,QAHZ;AAIPG,gBAJO,GAIE;AACb,6BAAiBF,QADJ;AAEb,4BAAgBC;AAFH,WAJF;AAAA;AAAA,iBAQUE,kBAAQC,IAAR,CAAgBC,iBAAOC,SAAvB,gCAA6D;AAClFC,iBAAK;AACHC,oBAAM,KADH;AAEHC,uBAAS,OAFN;AAGHC,6BAAe;AAHZ,aAD6E;AAMlFC,oBAAQ;AACNX,gCADM;AAENQ,oBAAM,gBAFA;AAGNI,0BAAYb,QAHN;AAINc,6BAAe,EAJT;AAKNC,qBAAO,EALD;AAMNC,8BAAgB;AANV;AAN0E,WAA7D,EAcpBb,MAdoB,CARV;;AAAA;AAAA;AAQLc,cARK,SAQLA,IARK;AAAA,sEAwBRd,MAxBQ;AAyBX,4BAAgBc;AAzBL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C,IALf","file":"sessionHeader.js","sourcesContent":["// 服务端生成未登录的sessionkey\nimport uuid from 'uuid/v4'\nimport request from '../request'\nimport config from '../config'\n\nexport default async () => {\n  const platform = 'universal-form'\n  const deviceId = uuid()\n  const ua = `www/1.0.0 (${platform}, unknown unknown) net/null`\n  const header = {\n    'X-Security-Id': deviceId,\n    'X-User-Agent': ua,\n  }\n  const { data } = await request.post(`${config.uasDomain}/passport/default/context`, {\n    app: {\n      name: 'www',\n      version: '1.0.0',\n      hotfixVersion: '0',\n    },\n    device: {\n      deviceId,\n      name: 'universal-form',\n      systemName: platform,\n      systemVersion: '',\n      model: '',\n      localizedModel: '',\n    },\n  }, header)\n  return {\n    ...header,\n    'X-User-Token': data,\n  }\n}\n"]}
{"version":3,"sources":["../src/medclips.js"],"names":["addLinkContent","patientId","doctorId","title","placeholder","url","uid","Error","finalUid","requestUrl","medclips","contentUrl","request","post","templateId","templateType","contentValue","placeholderImage","flowIndexUrl","flowId","createdDatetime","format","token","resp","getContentInfoByPatientIds","patientIds","join","get"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;AACA;AACO,IAAMA;AAAA,sFAAiB;AAAA,QAASC,SAAT,SAASA,SAAT;AAAA,QAAoBC,QAApB,SAAoBA,QAApB;AAAA,QAA8BC,KAA9B,SAA8BA,KAA9B;AAAA,kCAAqCC,WAArC;AAAA,QAAqCA,WAArC,qCAAmD,KAAnD;AAAA,QAA0DC,GAA1D,SAA0DA,GAA1D;AAAA,QAA+DC,GAA/D,SAA+DA,GAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACxB,CAACL,SAAD,IAAc,CAACC,QADS;AAAA;AAAA;AAAA;;AAAA,kBACO,IAAIK,KAAJ,CAAU,cAAV,CADP;;AAAA;AAAA,gBAEvBF,GAFuB;AAAA;AAAA;AAAA;;AAAA,kBAEZ,IAAIE,KAAJ,CAAU,SAAV,CAFY;;AAAA;AAGtBC,oBAHsB,GAGXF,OAAO,kBAHI;AAItBG,sBAJsB,GAINC,iBAASC,UAJH,sBAI8BT,QAJ9B,iBAIkDD,SAJlD,SAI+DO,QAJ/D;AAAA;AAAA,mBAKTI,kBAAQC,IAAR,CAAaJ,UAAb,EAAyB;AAC1CH,mBAAKE,QADqC;AAE1CM,0BAAY,uBAF8B;AAG1CC,4BAAc,uBAH4B;AAI1CC,4BAAc;AACZb,4BADY;AAEZc,kCAAkBb,WAFN;AAGZc,8BAAcb,GAHF;AAIZc,wBAAQ;AAJI,eAJ4B;AAU1CC,+BAAiB,wBAASC,MAAT,CAAgB,qBAAhB;AAVyB,aAAzB,EAWhB;AACDC,qBAAO;AADN,aAXgB,CALS;;AAAA;AAKtBC,gBALsB;AAAA,6CAmBrBA,IAnBqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAsBP;;AAEO,IAAMC,kEAA6B,SAA7BA,0BAA6B,QAAoB;AAAA,MAAjBC,UAAiB,SAAjBA,UAAiB;;AAC5D,MAAI,CAACA,UAAD,IAAe,CAAC,mBAAQA,UAAR,CAApB,EAAyC,MAAM,IAAIlB,KAAJ,CAAU,UAAV,CAAN;AACzC,MAAME,aAAgBC,iBAASC,UAAzB,2BAAyDc,WAAWC,IAAX,CAAgB,GAAhB,CAA/D;AACA,SAAOd,kBAAQe,GAAR,CAAYlB,UAAZ,EAAwB,EAAxB,EAA4B;AACjCa,WAAO;AAD0B,GAA5B,CAAP;AAGD,CANM","file":"medclips.js","sourcesContent":["import moment from 'moment'\nimport uuid from 'uuid/v4'\nimport request from './request'\nimport { medclips } from './config'\nimport { isArray } from './lang'\n\n// placeholder暂时不传\n// 可以通过指定uid来保证不会追加\nexport const addLinkContent = async ({ patientId, doctorId, title, placeholder = 'xxx', url, uid }) => {\n  if (!patientId || !doctorId) throw new Error('缺少医生id或者患者id')\n  if (!url) throw new Error('缺少链接url')\n  const finalUid = uid || uuid()\n  const requestUrl = `${medclips.contentUrl}/_insecure/v1/${doctorId}/patient/${patientId}/${finalUid}`\n  const resp = await request.post(requestUrl, {\n    uid: finalUid,\n    templateId: 'CUSTOM_MEDICAL_RECORD',\n    templateType: 'CUSTOM_MEDICAL_RECORD',\n    contentValue: {\n      title,\n      placeholderImage: placeholder,\n      flowIndexUrl: url,\n      flowId: '0',\n    },\n    createdDatetime: moment().format('YYYY-MM-DD HH:mm:ss'),\n  }, {\n    token: 'random-aea30430-d39b-4a80-84d3-bf2f4f489c76',\n  })\n  return resp\n}\n\n// 根据患者id获取患者填写的表单信息接口\n\nexport const getContentInfoByPatientIds = ({ patientIds }) => {\n  if (!patientIds || !isArray(patientIds)) throw new Error('患者id提供有误')\n  const requestUrl = `${medclips.contentUrl}/patient/item/form/${patientIds.join(',')}`\n  return request.get(requestUrl, {}, {\n    token: 'random-aea30430-d39b-4a80-84d3-bf2f4f489c76',\n  })\n}\n"]}
{"version":3,"sources":["../src/feedback.js"],"names":["defaultAppNames","sendFeedbackTextMessage","doctorId","message","appName","appNames","Array","isArray","all","map","request","post","drDomain","adminId","feedBack","messageType","type","toId","_appName","createdAt","Date","results","console","info"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAKA,IAAMA,kBAAkB,CAAC,UAAD,EAAa,eAAb,CAAxB;;AAEA;;;;;;AAMA;AACO,IAAMC;AAAA,sFAA0B;AAAA,QACrCC,QADqC,SACrCA,QADqC;AAAA,QAErCC,OAFqC,SAErCA,OAFqC;AAAA,8BAGrCC,OAHqC;AAAA,QAGrCA,OAHqC,iCAG3BJ,eAH2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAK/BK,oBAL+B,GAKpBC,MAAMC,OAAN,CAAcH,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CALf;AAAA;AAAA,mBAMf,kBAAQI,GAAR,CAAYH,SAASI,GAAT,CAAa;AAAA,qBAC7CC,kBACGC,IADH,CACWC,gBADX,oCACoD;AAChDC,yBAASC,iBAASD,OAD8B;AAEhDV,gCAFgD;AAGhDY,6BAAa,MAHmC;AAIhDC,sBAAM,CAJ0C;AAKhDC,sBAAMf,QAL0C;AAMhDE,yBAASc,QANuC;AAOhDC,2BAAW,IAAIC,IAAJ;AAPqC,eADpD,CAD6C;AAAA,aAAb,CAAZ,CANe;;AAAA;AAM/BC,mBAN+B;;;AAmBrCC,oBAAQC,IAAR,uCACErB,QADF,UACeC,OADf,iCACkD,yBAAekB,OAAf,CADlD;AAnBqC,6CAqB9BA,OArB8B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAAA;AAAA;AAAA;AAAA,GAAN","file":"feedback.js","sourcesContent":["import request from './request'\nimport {\n  drDomain,\n  feedBack,\n} from './config'\n\nconst defaultAppNames = ['medchart', 'medclips_plus']\n\n/**\n * 发送纯文本小秘书消息，\n * @param {String} doctorId 医生id\n * @param {String} message 文本消息内容\n * @param {String|Array<string>} appName 发送App名称，默认全发（经典版，新版病历夹）\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const sendFeedbackTextMessage = async ({\n  doctorId,\n  message,\n  appName = defaultAppNames,\n}) => {\n  const appNames = Array.isArray(appName) ? appName : [appName]\n  const results = await Promise.all(appNames.map(_appName => (\n    request\n      .post(`${drDomain}/api/feedback/BusinessMessage`, {\n        adminId: feedBack.adminId,\n        message,\n        messageType: 'TEXT',\n        type: 2,\n        toId: doctorId,\n        appName: _appName,\n        createdAt: new Date(),\n      })\n  )))\n\n  console.info(`[Send Feedback Text Message]:\n{ ${doctorId}, ${message} }, feedback response: , ${JSON.stringify(results)}`)\n  return results\n}\n"]}
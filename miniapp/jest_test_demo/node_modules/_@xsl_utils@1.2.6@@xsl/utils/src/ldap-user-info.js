const decodePayload = payloadToken => Buffer.from(payloadToken, 'base64').toString()

export default (token) => {
  const tokenJson = token.split('.')
  const payloadInfo = decodePayload(tokenJson[1])
  const { operatorId, operatorName, roles } = JSON.parse(payloadInfo)
  const operatorNameEncode = encodeURI(operatorName)
  return {
    operatorId,
    operatorName,
    roles,
    operatorNameEncode,
  }
}

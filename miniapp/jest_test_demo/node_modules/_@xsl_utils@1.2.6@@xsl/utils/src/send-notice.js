import request from './request'
import { notice } from './config'

const { Authorization, Domain } = notice

// http://wiki.xingshulin.com/pages/viewpage.action?pageId=51713361#tag/%E4%B8%9A%E5%8A%A1%E6%8E%A5%E5%85%A5
// messageTagId分别为1：病历审核，2：随访申请，3：项目通知，4：钱包助手，5：只能助手，6：系统通知，7：好友申请，8：公告通知
async function sendNormalNotice({ appNames, userIds, messageTagId = 3, priority = 10, content }) {
  await request.post(`${Domain}/message/v2/delivery`, {
    dest: {
      appName: appNames,
      userId: userIds,
    },
    priority,
    messageTagId,
    content,
  }, {
    Authorization,
    'X-Request-From': 'service:management',
    'Content-Type': 'application/json',
  })
}

export default sendNormalNotice

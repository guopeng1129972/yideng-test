import request from '../request'
import { isWeiXin } from '../platform'

export default async ({ fullPath }) => {
  if (isWeiXin()) {
    const { wxSdkConfig, apiList } = await request.get('/wx/config', {
      fullPath,
    })
    const { wx } = window // eslint-disable-line
    if (wxSdkConfig && wx) {
      wx.config({
        debug: false,
        ...wxSdkConfig,
        jsApiList: apiList,
      })
    }
  }
}

// 服务端生成未登录的sessionkey
import uuid from 'uuid/v4'
import request from '../request'
import config from '../config'

export default async () => {
  const platform = 'universal-form'
  const deviceId = uuid()
  const ua = `www/1.0.0 (${platform}, unknown unknown) net/null`
  const header = {
    'X-Security-Id': deviceId,
    'X-User-Agent': ua,
  }
  const { data } = await request.post(`${config.uasDomain}/passport/default/context`, {
    app: {
      name: 'www',
      version: '1.0.0',
      hotfixVersion: '0',
    },
    device: {
      deviceId,
      name: 'universal-form',
      systemName: platform,
      systemVersion: '',
      model: '',
      localizedModel: '',
    },
  }, header)
  return {
    ...header,
    'X-User-Token': data,
  }
}

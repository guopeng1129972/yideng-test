import assert from 'power-assert'
import { sendMessage, getV4PatientInfoByPatientId } from '../src/followup'

describe('test followup', () => {
  it('sendMessage', async () => {
    // Given
    const openId = 'ovVgL1jyr6evqfDaX_5HwgcwWL5o'
    const content = { content: '', images: [], link: { title: '《病情记录1》', url: 'https://www.baidu.com' }, voice: [] }
    const data = await sendMessage({ openId, content })
    // Then
    assert(data)
  })

  it('getV4PatientInfoByPatientId', async () => {
    // Given
    const patientId = '241'
    const data = await getV4PatientInfoByPatientId({ patientId })
    // Then
    assert(data)
  })
})
